(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459],{36429:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return r(94759)}])},75119:function(e,t,r){"use strict";r.d(t,{Z:function(){return h}});var a=r(85893),n=r(66810),s=r(31505),o=r(87740),l=r(86597),i=r(54543),c=r(96476),d=r(86050),u=r(67294);function h(e){let{isOpen:t,onClose:r,onSubmit:h,error:p}=e,[m,g]=(0,u.useState)(""),[x,f]=(0,u.useState)(""),[y,w]=(0,u.useState)(""),j=()=>{if(m.length<1){w("Password must be at least 8 characters");return}if(m!==x){w("Passwords do not match");return}h(m)};return(0,a.jsx)(n.R,{isOpen:t,placement:"top-center",onOpenChange:r,children:(0,a.jsx)(s.A,{children:e=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(o.k,{className:"flex flex-col gap-1",children:"Create Password"}),(0,a.jsxs)(l.I,{children:[(0,a.jsx)(i.Y,{label:"Enter your password",type:"password",variant:"bordered",value:m,onChange:e=>g(e.target.value),minLength:8,required:!0}),(0,a.jsx)(i.Y,{label:"Confirm Password",type:"password",variant:"bordered",value:x,onChange:e=>f(e.target.value),minLength:8,required:!0}),(p||y)&&(0,a.jsx)("p",{className:"text-red-500 text-sm",children:p||y})]}),(0,a.jsxs)(c.R,{children:[(0,a.jsx)(d.A,{color:"danger",variant:"flat",onPress:e,children:"Cancel"}),(0,a.jsx)(d.A,{color:"primary",onPress:j,children:"Secure Wallet"})]})]})})})}},94759:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return N}});var a=r(85893),n=r(67294),s=r(32132),o=r(68447),l=r(11163),i=r(90845),c=r(19314),d=r(90776),u=r(24945),h=r(54543),p=r(86050),m=r(62940),g=r(23023),x=r(75119),f=r(41027),y=r(29159),w=r(98312);let{connect:j,keyStores:b,KeyPair:v}=o;function N(){let[e,t]=(0,n.useState)("seedPhrase"),[r,o]=(0,n.useState)(""),[j,b]=(0,n.useState)(""),[N,S]=(0,n.useState)(null),[P,C]=(0,n.useState)(!1),[E,k]=(0,n.useState)(!1),[_,K]=(0,n.useState)(!1),{isOpen:W,onOpen:I,onClose:L}=(0,f.q)(),[A,Z]=(0,n.useState)(""),[O,F]=(0,n.useState)(null),M=(0,l.useRouter)(),R=async()=>{try{let t,a;if(C(!0),S(null),"seedPhrase"===e){if(!r.trim())throw Error("Please enter your seed phrase");let e=(0,s.parseSeedPhrase)(r);v.fromString(e.secretKey),t=e.publicKey;let n=await Y(t);if(0===n.length)throw Error("No accounts found for this seed phrase");a={accountId:n[0],publicKey:t,privateKey:e.secretKey,seedPhrase:r,loginMethod:"seedPhrase"}}else{if(!j.trim())throw Error("Please enter your private key");t=v.fromString(j).getPublicKey().toString();let e=await Y(t);if(0===e.length)throw Error("No accounts found for this private key");a={accountId:e[0],publicKey:t,privateKey:j,loginMethod:"privateKey"}}F(a),I()}catch(e){console.error("Login error:",e),S(e.message||"Failed to login")}finally{C(!1)}},Y=async e=>{try{let t=await fetch("".concat("https://test.api.fastnear.com","/v0/public_key/").concat(e,"/all"));if(!t.ok)throw Error("Failed to lookup accounts");let r=await t.json();return r.account_ids||[]}catch(e){return console.error("FastNear API - Error looking up accounts:",e),[]}},q=async e=>{try{console.log("Setting up wallet with password...");let t=await w.e.encrypt(O,e),r={accountId:O.accountId,publicKey:O.publicKey,loginMethod:O.loginMethod};console.log("Storing public wallet info..."),await w.t.set("publicWalletInfo",r),console.log("Storing encrypted wallet..."),await w.t.set("encryptedWallet",t),console.log("Wallet setup complete, navigating to dashboard..."),L();let a="undefined"!=typeof chrome&&chrome.runtime&&chrome.runtime.id;a?y.f.replace("dashboard"):M.push("/dashboard")}catch(e){console.error("Error in handleSetPassword:",e),Z("Error securing wallet")}};return(0,a.jsxs)("div",{className:"min-h-[600px] p-4 bg-gray-50",children:[(0,a.jsx)(i.w,{className:"max-w-md mx-auto",children:(0,a.jsxs)(c.G,{className:"p-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Login to NEAR Wallet"}),N&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-600 p-3 rounded-lg mb-4",children:N}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(d.n,{selectedKey:e,onSelectionChange:t,variant:"bordered",fullWidth:!0,children:[(0,a.jsx)(u.r,{title:"Seed Phrase",children:(0,a.jsx)("div",{className:"pt-4",children:(0,a.jsx)(h.Y,{label:"Enter your seed phrase",value:r,onChange:e=>o(e.target.value),type:E?"text":"password",endContent:(0,a.jsx)("button",{type:"button",onClick:()=>k(!E),children:E?(0,a.jsx)(g.Z,{className:"h-5 w-5"}):(0,a.jsx)(m.Z,{className:"h-5 w-5"})})})})},"seedPhrase"),(0,a.jsx)(u.r,{title:"Private Key",children:(0,a.jsx)("div",{className:"pt-4",children:(0,a.jsx)(h.Y,{label:"Enter your private key",value:j,onChange:e=>b(e.target.value),type:_?"text":"password",endContent:(0,a.jsx)("button",{type:"button",onClick:()=>K(!_),children:_?(0,a.jsx)(g.Z,{className:"h-5 w-5"}):(0,a.jsx)(m.Z,{className:"h-5 w-5"})})})})},"privateKey")]}),(0,a.jsx)(p.A,{onClick:R,isLoading:P,disabled:P,color:"primary",className:"w-full",size:"lg",children:P?"Logging in...":"Login"})]}),(0,a.jsx)("div",{className:"mt-6 text-center",children:(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Don't have a wallet?"," ",(0,a.jsx)("span",{onClick:()=>{let e="undefined"!=typeof chrome&&chrome.runtime&&chrome.runtime.id;e?y.f.replace("createWallet"):M.push("/createWallet")},className:"text-blue-600 cursor-pointer hover:underline",children:"Create one here"})]})})]})}),(0,a.jsx)(x.Z,{isOpen:W,onClose:L,onSubmit:q,error:A})]})}},46601:function(){},52361:function(){},94616:function(){},55024:function(){}},function(e){e.O(0,[714,265,612,238,364,893,774,888,179],function(){return e(e.s=36429)}),_N_E=e.O()}]);