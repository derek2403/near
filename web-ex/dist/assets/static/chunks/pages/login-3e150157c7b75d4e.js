(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459],{36429:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return r(94759)}])},94759:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return N}});var a=r(85893),s=r(67294),n=r(32132),o=r(68447),l=r(11163),i=r(90845),c=r(19314),d=r(90776),u=r(24945),h=r(54543),p=r(86050),m=r(62940),x=r(23023),y=r(75119),g=r(41027),w=r(98312);let{connect:f,keyStores:b,KeyPair:j}=o;function N(){let[e,t]=(0,s.useState)("seedPhrase"),[r,o]=(0,s.useState)(""),[f,b]=(0,s.useState)(""),[N,v]=(0,s.useState)(null),[S,E]=(0,s.useState)(!1),[k,P]=(0,s.useState)(!1),[_,C]=(0,s.useState)(!1),{isOpen:K,onOpen:L,onClose:I}=(0,g.q)(),[W,Z]=(0,s.useState)(""),[M,R]=(0,s.useState)(null);(0,l.useRouter)();let A=async()=>{try{let t,a;if(E(!0),v(null),"seedPhrase"===e){if(!r.trim())throw Error("Please enter your seed phrase");let e=(0,n.parseSeedPhrase)(r);j.fromString(e.secretKey),t=e.publicKey;let s=await F(t);if(0===s.length)throw Error("No accounts found for this seed phrase");a={accountId:s[0],publicKey:t,privateKey:e.secretKey,seedPhrase:r,loginMethod:"seedPhrase"}}else{if(!f.trim())throw Error("Please enter your private key");t=j.fromString(f).getPublicKey().toString();let e=await F(t);if(0===e.length)throw Error("No accounts found for this private key");a={accountId:e[0],publicKey:t,privateKey:f,loginMethod:"privateKey"}}R(a),L()}catch(e){console.error("Login error:",e),v(e.message||"Failed to login")}finally{E(!1)}},F=async e=>{try{let t=await fetch("".concat("https://test.api.fastnear.com","/v0/public_key/").concat(e,"/all"));if(!t.ok)throw Error("Failed to lookup accounts");let r=await t.json();return r.account_ids||[]}catch(e){return console.error("FastNear API - Error looking up accounts:",e),[]}},O=async e=>{try{let t=await w.e.encrypt(M,e),r={accountId:M.accountId,publicKey:M.publicKey,loginMethod:M.loginMethod};await w.t.set("publicWalletInfo",r),await w.t.set("encryptedWallet",t),I(),window.location.href=chrome.runtime.getURL("dashboard.html")}catch(e){console.error("Error in handleSetPassword:",e),Z("Error securing wallet")}};return(0,a.jsxs)("div",{className:"min-h-[600px] p-4 bg-gray-50",children:[(0,a.jsx)(i.w,{className:"max-w-md mx-auto",children:(0,a.jsxs)(c.G,{className:"p-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Login to NEAR Wallet"}),N&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-600 p-3 rounded-lg mb-4",children:N}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(d.n,{selectedKey:e,onSelectionChange:t,variant:"bordered",fullWidth:!0,children:[(0,a.jsx)(u.r,{title:"Seed Phrase",children:(0,a.jsx)("div",{className:"pt-4",children:(0,a.jsx)(h.Y,{label:"Enter your seed phrase",value:r,onChange:e=>o(e.target.value),type:k?"text":"password",endContent:(0,a.jsx)("button",{type:"button",onClick:()=>P(!k),children:k?(0,a.jsx)(x.Z,{className:"h-5 w-5"}):(0,a.jsx)(m.Z,{className:"h-5 w-5"})})})})},"seedPhrase"),(0,a.jsx)(u.r,{title:"Private Key",children:(0,a.jsx)("div",{className:"pt-4",children:(0,a.jsx)(h.Y,{label:"Enter your private key",value:f,onChange:e=>b(e.target.value),type:_?"text":"password",endContent:(0,a.jsx)("button",{type:"button",onClick:()=>C(!_),children:_?(0,a.jsx)(x.Z,{className:"h-5 w-5"}):(0,a.jsx)(m.Z,{className:"h-5 w-5"})})})})},"privateKey")]}),(0,a.jsx)(p.A,{onClick:A,isLoading:S,disabled:S,color:"primary",className:"w-full",size:"lg",children:S?"Logging in...":"Login"})]}),(0,a.jsx)("div",{className:"mt-6 text-center",children:(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Don't have a wallet?"," ",(0,a.jsx)("span",{onClick:()=>{window.location.href=chrome.runtime.getURL("createWallet.html")},className:"text-blue-600 cursor-pointer hover:underline",children:"Create one here"})]})})]})}),(0,a.jsx)(y.Z,{isOpen:K,onClose:I,onSubmit:O,error:W})]})}}},function(e){e.O(0,[736,592,888,179],function(){return e(e.s=36429)}),_N_E=e.O()}]);