(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[26],{51075:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return t(65322)}])},65322:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return U}});var a=t(85893),n=t(67294),c=t(11163),i=t(90845),r=t(19314),l=t(90776),o=t(24945),d=t(86050),h=t(82187),x=t(68447),m=t(92063),u=t(61426),p=t(3306),j=t(36165),f=t(40364),g=t(51382),N=t(5362),v=t(91902);function b(e){let{balance:s,walletInfo:t,transactions:c,isLoadingTxns:l,copied:o,handleCopy:h,formatDate:x,getTransactionType:b,getTransactionAmount:w,router:y,pagination:C}=e,[_,S]=(0,n.useState)(!1),k=async()=>{try{await navigator.clipboard.writeText(null==t?void 0:t.accountId),S(!0),setTimeout(()=>{S(!1)},1e3)}catch(e){console.error("Failed to copy:",e)}},E=e=>!1===e.status?{status:"Failed",className:"text-red-500"}:{status:"",className:""},I=e=>Number(e).toFixed(6),A=e=>"https://testnet.nearblocks.io/address/".concat(e);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.w,{children:(0,a.jsx)(r.G,{className:"p-8",children:(0,a.jsxs)("div",{className:"text-black",children:[(0,a.jsx)("div",{className:"text-sm opacity-80 mb-1",children:"Total Balance"}),(0,a.jsxs)("div",{className:"text-4xl font-bold mb-4",children:[I(s)," NEAR"]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"text-sm opacity-80",children:"Account ID:"}),(0,a.jsx)("div",{className:"font-mono",children:null==t?void 0:t.accountId}),(0,a.jsx)(m.e,{content:_?"Copied!":"Copy to clipboard",children:(0,a.jsx)("button",{onClick:k,className:"text-black opacity-80 hover:opacity-100",children:_?(0,a.jsx)(j.Z,{className:"h-5 w-5"}):(0,a.jsx)(p.Z,{className:"h-5 w-5"})})}),(0,a.jsx)(m.e,{content:"View on Explorer",children:(0,a.jsx)("button",{onClick:()=>window.open(A(null==t?void 0:t.accountId),"_blank"),className:"text-black opacity-80 hover:opacity-100",children:(0,a.jsx)(v.Z,{className:"h-5 w-5"})})})]})]})})}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)(d.A,{size:"lg",color:"primary",startContent:(0,a.jsx)(f.Z,{className:"h-5 w-5"}),onPress:()=>y.push("/send?mode=native"),className:"h-20",children:(0,a.jsxs)("div",{className:"flex flex-col items-start w-full",children:[(0,a.jsx)("span",{className:"text-lg",children:"Send"}),(0,a.jsx)("span",{className:"text-xs opacity-80 whitespace-nowrap",children:"Transfer NEAR"})]})}),(0,a.jsx)(d.A,{size:"lg",color:"secondary",startContent:(0,a.jsx)(g.Z,{className:"h-5 w-5"}),onPress:()=>y.push("/receive"),className:"h-20",children:(0,a.jsxs)("div",{className:"flex flex-col items-start w-full",children:[(0,a.jsx)("span",{className:"text-lg",children:"Receive"}),(0,a.jsx)("span",{className:"text-xs opacity-80 whitespace-nowrap",children:"Get NEAR"})]})})]}),(0,a.jsx)(i.w,{children:(0,a.jsxs)(r.G,{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Recent Transactions"}),l?(0,a.jsx)("div",{className:"text-center py-4",children:"Loading transactions..."}):0===c.length?(0,a.jsx)("div",{className:"text-center py-4",children:"No transactions found"}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"space-y-3",children:c.map(e=>{let s=E(e),n="Failed"===s.status;return(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 rounded-full ".concat(n?"bg-red-100":"Sent"===b(e,t.accountId)?"bg-pink-100":"bg-green-100"),children:n?(0,a.jsx)(N.Z,{className:"h-5 w-5 text-red-500"}):"Sent"===b(e,t.accountId)?(0,a.jsx)(f.Z,{className:"h-5 w-5 text-pink-500"}):(0,a.jsx)(g.Z,{className:"h-5 w-5 text-green-500"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"font-medium flex items-center gap-2",children:[b(e,t.accountId),s.status&&(0,a.jsxs)("span",{className:"text-sm ".concat(s.className),children:["(",s.status,")"]})]}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:x(e.block_timestamp)})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[!n&&(0,a.jsxs)("div",{className:"font-medium ".concat(s.className),children:[I(w(e))," NEAR"]}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:(0,a.jsx)(d.A,{size:"sm",variant:"light",onPress:()=>window.open("https://testnet.nearblocks.io/txns/".concat(e.transaction_hash),"_blank"),children:"View"})})]})]},e.transaction_hash)})}),(0,a.jsx)("div",{className:"flex justify-center mt-4",children:(0,a.jsx)(u.g,{total:C.totalPages,page:C.currentPage,onChange:C.onPageChange,showControls:!0})})]})]})})]})}let w=e=>(0,a.jsxs)("svg",{"aria-hidden":"true",fill:"none",focusable:"false",height:"24",role:"presentation",viewBox:"0 0 24 24",width:"24",...e,children:[(0,a.jsx)("path",{d:"M12 22.75C6.07 22.75 1.25 17.93 1.25 12C1.25 6.07 6.07 1.25 12 1.25C17.93 1.25 22.75 6.07 22.75 12C22.75 17.93 17.93 22.75 12 22.75ZM12 2.75C6.9 2.75 2.75 6.9 2.75 12C2.75 17.1 6.9 21.25 12 21.25C17.1 21.25 21.25 17.1 21.25 12C21.25 6.9 17.1 2.75 12 2.75Z",fill:"currentColor"}),(0,a.jsx)("path",{d:"M15.7125 12.75H8.2875C7.87 12.75 7.53 12.41 7.53 12C7.53 11.59 7.87 11.25 8.2875 11.25H15.7125C16.13 11.25 16.47 11.59 16.47 12C16.47 12.41 16.13 12.75 15.7125 12.75Z",fill:"currentColor"})]}),y=e=>(0,a.jsx)("svg",{"aria-hidden":"true",fill:"none",focusable:"false",height:"24",role:"presentation",viewBox:"0 0 24 24",width:"24",...e,children:(0,a.jsx)("path",{d:"M16.19 2H7.81C4.17 2 2 4.17 2 7.81V16.18C2 19.83 4.17 22 7.81 22H16.18C19.82 22 21.99 19.83 21.99 16.19V7.81C22 4.17 19.83 2 16.19 2ZM7 13.31L9.15 11.16C9.35 10.96 9.66 10.96 9.86 11.16L11.52 12.82L14.54 9.79C14.74 9.59 15.05 9.59 15.25 9.79L17.7 12.24C17.89 12.43 17.89 12.74 17.7 12.93C17.51 13.12 17.2 13.12 17.01 12.93L14.95 10.87L11.93 13.9C11.73 14.1 11.42 14.1 11.22 13.9L9.56 12.24L7.8 14C7.61 14.19 7.3 14.19 7.11 14C6.91 13.81 6.91 13.5 7.1 13.31H7Z",fill:"currentColor"})});var C=t(25675),_=t.n(C);let S=t(94805),{chains:k}=S,E=e=>Object.values(e).reduce((e,s)=>e+parseFloat(s),0).toFixed(4);function I(e){let{balance:s,walletInfo:t,transactions:n,isLoadingTxns:c,copied:h,handleCopy:x,formatDate:u,getTransactionType:N,getTransactionAmount:v,router:b,pagination:C,evmAddress:S,isDerivingAddress:I,derivationError:A,chainBalances:Z}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.w,{children:(0,a.jsx)(r.G,{className:"p-8",children:(0,a.jsxs)("div",{className:"text-black",children:[(0,a.jsx)("div",{className:"text-sm opacity-80 mb-1",children:"Chain Signature Wallet"}),I?(0,a.jsx)("div",{className:"text-center py-4",children:"Deriving EVM address..."}):A?(0,a.jsx)("div",{className:"text-red-500",children:A}):(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsx)("div",{className:"p-4 bg-gray-50 rounded-lg",children:(0,a.jsxs)("div",{className:"grid grid-cols-[2fr_1fr_auto] gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium mb-2",children:"Your EVM Address"}),(0,a.jsxs)("div",{className:"text-sm font-mono text-gray-600 flex items-center",children:[S,(0,a.jsx)("button",{onClick:()=>x(S),className:"ml-2 text-gray-500 hover:text-gray-700 inline-flex items-center",children:h?(0,a.jsx)(j.Z,{className:"h-4 w-4 text-green-500"}):(0,a.jsx)(p.Z,{className:"h-4 w-4"})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium mb-2",children:"Total Balance"}),(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[E(Z)," ETH"]})]}),(0,a.jsx)("div",{className:"flex items-start gap-2",children:k.map(e=>(0,a.jsx)(m.e,{content:e.name,children:(0,a.jsx)(_(),{src:e.logo,alt:e.name,width:24,height:24,className:"cursor-pointer transition-transform hover:scale-110",onClick:()=>window.open("".concat(e.explorerUrl).concat(S),"_blank")})},e.prefix))})]})})}),(0,a.jsxs)("div",{className:"mt-4 flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"text-sm opacity-80",children:"NEAR Account ID:"}),(0,a.jsx)("div",{className:"font-mono",children:null==t?void 0:t.accountId}),(0,a.jsx)(m.e,{content:h?"Copied!":"Copy to clipboard",children:(0,a.jsx)("button",{onPress:()=>x(null==t?void 0:t.accountId),className:"text-black opacity-80 hover:opacity-100",children:h?(0,a.jsx)(j.Z,{className:"h-5 w-5"}):(0,a.jsx)(p.Z,{className:"h-5 w-5"})})})]})]})})}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)(d.A,{size:"lg",color:"primary",startContent:(0,a.jsx)(f.Z,{className:"h-5 w-5"}),onPress:()=>b.push("/send?mode=chain"),className:"h-20",children:(0,a.jsxs)("div",{className:"flex flex-col items-start w-full",children:[(0,a.jsx)("span",{className:"text-lg",children:"Send"}),(0,a.jsx)("span",{className:"text-xs opacity-80 whitespace-nowrap",children:"Transfer via Chain Signature"})]})}),(0,a.jsx)(d.A,{size:"lg",color:"secondary",startContent:(0,a.jsx)(g.Z,{className:"h-5 w-5"}),onPress:()=>b.push("/receive"),className:"h-20",isDisabled:!0,children:(0,a.jsxs)("div",{className:"flex flex-col items-start w-full",children:[(0,a.jsx)("span",{className:"text-lg",children:"Receive"}),(0,a.jsx)("span",{className:"text-xs opacity-80 whitespace-nowrap",children:"Receive via Chain Signature"})]})})]}),(0,a.jsx)(i.w,{children:(0,a.jsx)(r.G,{children:(0,a.jsxs)(l.n,{"aria-label":"Transaction options",classNames:{tabList:"gap-6 w-full relative rounded-none p-0 border-b border-divider",cursor:"w-full bg-[#22d3ee]",tab:"max-w-fit px-0 h-12",tabContent:"group-data-[selected=true]:text-[#06b6d4]"},color:"primary",variant:"underlined",children:[(0,a.jsx)(o.r,{title:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(w,{}),(0,a.jsx)("span",{children:"Chain Balances"})]}),children:(0,a.jsx)("div",{className:"py-4",children:k.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)(_(),{src:e.logo,alt:e.name,width:24,height:24,className:"cursor-pointer transition-transform hover:scale-110"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium",children:e.name}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.symbol})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"font-medium",children:[Z[e.prefix]||"0.0000"," ",e.symbol]}),(0,a.jsx)(d.A,{size:"sm",variant:"light",onPress:()=>window.open("".concat(e.explorerUrl).concat(S),"_blank"),children:"View"})]})]},e.prefix))})},"tokens"),(0,a.jsx)(o.r,{title:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(y,{}),(0,a.jsx)("span",{children:"Recent Transactions"})]}),children:(0,a.jsx)("div",{className:"py-4",children:(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("div",{className:"mb-4 text-gray-500",children:"Chain Signature transactions will appear here"}),(0,a.jsx)("div",{className:"text-sm text-gray-400",children:"Your EVM chain transactions will be displayed in this section once you start making transfers"})]})})},"transactions")]})})})]})}var A={src:"./_next/static/media/NearIcon.c8eff962.svg",height:90,width:90,blurWidth:0,blurHeight:0},Z={src:"./_next/static/media/ChainIcon.060fadba.svg",height:800,width:800,blurWidth:0,blurHeight:0},P=t(56564),T=t(4236),R=t(48470),F=t(94805),L=t(98312),M=t(29159);let{chains:B}=F,{connect:H,keyStores:V,providers:D}=x;function U(){let e=(0,c.useRouter)(),[s,t]=(0,n.useState)(null),[m,u]=(0,n.useState)("0"),[p,j]=(0,n.useState)("0"),[f,g]=(0,n.useState)(!1),[N,v]=(0,n.useState)(null),[w,y]=(0,n.useState)([]),[C,_]=(0,n.useState)(!0),[S,k]=(0,n.useState)(!0),[E,F]=(0,n.useState)(1),[H,V]=(0,n.useState)(1),[U,W]=(0,n.useState)(null),[z,G]=(0,n.useState)(!0),[O,q]=(0,n.useState)(""),[J,X]=(0,n.useState)({});(0,n.useEffect)(()=>{let e=localStorage.getItem("selectedTab");e&&k("near"===e)},[]),(0,n.useEffect)(()=>{let s=async()=>{try{console.log("Checking wallet info...");let s=await L.t.get("publicWalletInfo");if(console.log("Public info:",s),!s){console.log("No wallet info found, redirecting...");let s="undefined"!=typeof chrome&&chrome.runtime&&chrome.runtime.id;s?M.f.replace("/"):e.push("/");return}t(s);let a=new D.JsonRpcProvider({url:"https://rpc.testnet.near.org"}),n=await a.query({request_type:"view_account",finality:"final",account_id:s.accountId}),c=x.utils.format.formatNearAmount(n.amount);u(Number(c).toFixed(6)),j(n.amount),await Y(s.accountId)}catch(e){console.error("Error in checkWallet:",e),v("Error loading wallet information")}};s()},[e]);let Y=async e=>{try{_(!0);let s=await fetch("https://api-testnet.nearblocks.io/v1/account/".concat(e,"/txns-only?per_page=25&order=desc")),t=await s.json();if(t&&t.txns){let e=new Map;t.txns.forEach(s=>{if(!e.has(s.transaction_hash)){var t,a;e.set(s.transaction_hash,{transaction_hash:s.transaction_hash,signer_account_id:s.signer_account_id,receiver_account_id:s.receiver_account_id,block_timestamp:s.block_timestamp,deposit:(null===(t=s.actions_agg)||void 0===t?void 0:t.deposit)||"0",status:null===(a=s.outcomes)||void 0===a?void 0:a.status})}});let s=Array.from(e.values());y(s),V(Math.ceil(s.length/5))}}catch(e){console.error("Error fetching transactions:",e)}finally{_(!1)}},K=()=>{let e=(E-1)*5,s=e+5;return w.slice(e,s)},Q=e=>{let s=new Date(e/1e6);return s.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})},$=(e,s)=>e.signer_account_id===s?"Sent":"Received",ee=e=>{try{if(!e.deposit)return"0";let t=x.utils.format.formatNearAmount(e.deposit),a=e.signer_account_id===(null==s?void 0:s.accountId)?"-":"+";return"".concat(a).concat(Number(t).toFixed(2))}catch(e){return"0"}},es=async e=>{try{await navigator.clipboard.writeText(e),g(!0),setTimeout(()=>g(!1),2e3)}catch(e){console.error("Failed to copy:",e)}};return((0,n.useEffect)(()=>{let e=async()=>{if((null==s?void 0:s.accountId)&&!U)try{G(!0),q("");let e=await (0,P.Ng)({accountId:s.accountId,mpcContractId:"v1.signer-prod.testnet",derivationPath:"evm,1"});W(e.address);let t={};for(let s of B)try{let a=new T.r6(s.rpcUrl),n=await a.getBalance(e.address);t[s.prefix]=R.dF(n)}catch(e){console.error("Error fetching balance for ".concat(s.name,":"),e),t[s.prefix]="0"}X(t)}catch(e){console.error("Error deriving address:",e),q("Failed to derive EVM address")}finally{G(!1)}};e()},[s,U]),s)?(0,a.jsx)("div",{className:"min-h-[600px] p-4 bg-gray-50",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center gap-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"Wallet Dashboard"}),(0,a.jsxs)(l.n,{"aria-label":"Wallet Mode",selectedKey:S?"near":"chain",onSelectionChange:e=>{let s="near"===e;k(s),localStorage.setItem("selectedTab",e)},variant:"bordered",classNames:{tabList:"gap-4",cursor:"w-full bg-primary",tab:"h-8 px-3",tabContent:"group-data-[selected=true]:text-white"},children:[(0,a.jsx)(o.r,{title:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(A,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"text-sm",children:"Native NEAR"})]})},"near"),(0,a.jsx)(o.r,{title:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"text-sm",children:"Chain Signature"})]})},"chain")]})]}),(0,a.jsx)(d.A,{isIconOnly:!0,variant:"light",onPress:()=>{let s="undefined"!=typeof chrome&&chrome.runtime&&chrome.runtime.id;s?M.f.replace("settings"):e.push("/settings")},children:(0,a.jsx)(h.Z,{className:"h-6 w-6"})})]}),(()=>{let t={balance:m,walletInfo:s,transactions:K(),isLoadingTxns:C,copied:f,handleCopy:es,formatDate:Q,getTransactionType:$,getTransactionAmount:ee,router:e,pagination:{currentPage:E,totalPages:H,onPageChange:F}};return S?(0,a.jsx)(b,{...t}):(0,a.jsx)(I,{...t,evmAddress:U,isDerivingAddress:z,derivationError:O,chainBalances:J})})()]})}):(0,a.jsx)("div",{className:"min-h-screen p-8 bg-gray-50 flex items-center justify-center",children:(0,a.jsx)(i.w,{children:(0,a.jsx)(r.G,{children:N||"Loading..."})})})}},46047:function(){},50303:function(){},46601:function(){},55024:function(){},94805:function(e){"use strict";e.exports=JSON.parse('{"chains":[{"prefix":"eth","name":"Ethereum","symbol":"ETH","logo":"/icons/eth.png","rpcUrl":"https://mainnet.infura.io/v3/your-project-id","explorerUrl":"https://etherscan.io/address/"},{"prefix":"bsc","name":"BNB Chain","symbol":"BNB","logo":"/icons/bnb.png","rpcUrl":"https://bsc-dataseed.binance.org","explorerUrl":"https://bscscan.com/address/"}]}')}},function(e){e.O(0,[265,612,238,893,760,774,888,179],function(){return e(e.s=51075)}),_N_E=e.O()}]);