(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[87],{9804:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/createWallet",function(){return s(38573)}])},38573:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return k}});var a=s(85893),l=s(67294),r=s(68447),n=s(32132),c=s(62940),o=s(23023),i=s(3306),d=s(36165),m=s(11163),h=s(75119),u=s(41027),x=s(90845),y=s(19314),b=s(54543),g=s(96180),p=s(86050),N=s(98312),j=s(29159);let{connect:w,keyStores:f,KeyPair:v}=r;function k(){let e=(0,m.useRouter)(),[t,s]=(0,l.useState)(!1),[r,k]=(0,l.useState)(null),[C,S]=(0,l.useState)(null),[I,K]=(0,l.useState)(""),[P,_]=(0,l.useState)(!1),[A,Z]=(0,l.useState)(null),[E,T]=(0,l.useState)(!1),[W,G]=(0,l.useState)(!1),[O,D]=(0,l.useState)({seedPhrase:!1,privateKey:!1,publicKey:!1,accountId:!1}),[U,R]=(0,l.useState)(""),{isOpen:q,onOpen:z,onClose:L}=(0,u.q)();(0,l.useEffect)(()=>{if(!I){Z(null);return}let e=async()=>{try{_(!0),k(null);let e="".concat(I,".testnet");console.log("Checking availability for account: ".concat(e));let t=await fetch("https://rpc.testnet.near.org",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",id:"dontcare",method:"query",params:{request_type:"view_account",finality:"final",account_id:e}})}),s=await t.json();console.log("RPC response:",s),s.error&&s.error.cause&&"UNKNOWN_ACCOUNT"===s.error.cause.name?(console.log("Account ".concat(e," does not exist - IS available")),Z(!0)):(console.log("Account ".concat(e," exists - NOT available")),Z(!1))}catch(e){console.error("Error checking account availability:",e),k(e.message)}finally{_(!1)}},t=setTimeout(()=>{e()},1e3);return()=>clearTimeout(t)},[I]);let M=async()=>{try{s(!0),k(null);let{seedPhrase:e,secretKey:t,publicKey:a}=(0,n.generateSeedPhrase)(),l="".concat(I,".testnet"),r={networkId:"testnet",keyStore:new f.InMemoryKeyStore,nodeUrl:"https://rpc.testnet.near.org",walletUrl:"https://testnet.mynearwallet.com/",helperUrl:"https://helper.testnet.near.org",explorerUrl:"https://testnet.nearblocks.io"},c=await w(r),o=v.fromString(t),i=new f.InMemoryKeyStore;await i.setKey("testnet",l,o),await c.createAccount(l,a),S({accountId:l,seedPhrase:e,publicKey:a,secretKey:t})}catch(e){k(e.message)}finally{s(!1)}},X=async(e,t)=>{try{await navigator.clipboard.writeText(e),D(e=>({...e,[t]:!0})),setTimeout(()=>{D(e=>({...e,[t]:!1}))},2e3)}catch(e){console.error("Failed to copy:",e)}},Y=async t=>{try{let s=await N.e.encrypt(C,t);await N.t.set("encryptedWallet",s);let a={accountId:C.accountId,publicKey:C.publicKey};await N.t.set("publicWalletInfo",a);let l=await N.e.hashPassword(t);await N.t.set("passwordHash",l),L();let r="undefined"!=typeof chrome&&chrome.runtime&&chrome.runtime.id;r?j.f.replace("dashboard"):e.push("/dashboard")}catch(e){R("Error securing wallet"),console.error(e)}};return(0,a.jsxs)("div",{className:"min-h-screen p-8 bg-gray-50",children:[(0,a.jsx)(x.w,{className:"max-w-md mx-auto md:max-w-2xl",children:(0,a.jsxs)(y.G,{className:"p-8",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"Create New Account"}),(0,a.jsx)("p",{className:"text-gray-600 mb-8",children:"Enter an Account ID to use with your NEAR account. Your Account ID will be used for all NEAR operations, including sending and receiving assets."}),r&&(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsx)(x.w,{className:"bg-danger-50 border-none",children:(0,a.jsx)(y.G,{className:"text-danger",children:r})})}),!C&&(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsx)(b.Y,{label:"Enter your Wallet Name",value:I,onChange:e=>{K(e.target.value.toLowerCase()),Z(null)},variant:"bordered",endContent:(0,a.jsx)("span",{className:"text-gray-500",children:".testnet"}),className:"max-w-full"})}),P&&(0,a.jsxs)("div",{className:"text-gray-600 mb-4 flex items-center gap-2",children:[(0,a.jsx)(g.c,{size:"sm"}),(0,a.jsx)("span",{children:"Checking availability..."})]}),null!==A&&(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsx)(x.w,{className:A?"bg-success-50":"bg-danger-50",children:(0,a.jsx)(y.G,{className:A?"text-success":"text-danger",children:A?"Congrats! ".concat(I,".testnet is available."):"Account ID is taken. Try something else."})})}),(0,a.jsx)(p.A,{onPress:M,isDisabled:t||!A||!I,color:"primary",className:"w-full",size:"lg",isLoading:t,spinner:(0,a.jsx)(g.c,{color:"white",size:"sm"}),children:"Generate New Wallet"})]}),C&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)(x.w,{className:"bg-success-50 border-none",children:(0,a.jsx)(y.G,{className:"text-success",children:"Wallet Generated Successfully!"})}),(0,a.jsxs)("div",{className:"bg-yellow-50 p-6 rounded-lg border border-yellow-200",children:[(0,a.jsx)("h2",{className:"font-semibold text-yellow-800 mb-4",children:"Important: Save This Information"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Account ID:"}),(0,a.jsxs)("div",{className:"flex items-center bg-white p-3 rounded-lg border",children:[(0,a.jsx)("p",{className:"text-sm flex-1",children:C.accountId}),(0,a.jsx)("button",{onClick:()=>X(C.accountId,"accountId"),className:"ml-2 text-gray-500 hover:text-gray-700",children:O.accountId?(0,a.jsx)(d.Z,{className:"h-5 w-5 text-green-500"}):(0,a.jsx)(i.Z,{className:"h-5 w-5"})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Seed Phrase:"}),(0,a.jsxs)("div",{className:"flex items-center bg-white p-3 rounded-lg border",children:[(0,a.jsx)("p",{className:"text-sm flex-1 break-all ".concat(E?"":"blur-sm"),children:C.seedPhrase}),(0,a.jsx)("button",{onClick:()=>X(C.seedPhrase,"seedPhrase"),className:"ml-2 text-gray-500 hover:text-gray-700",children:O.seedPhrase?(0,a.jsx)(d.Z,{className:"h-5 w-5 text-green-500"}):(0,a.jsx)(i.Z,{className:"h-5 w-5"})}),(0,a.jsx)("button",{onClick:()=>T(!E),className:"ml-2 text-gray-500 hover:text-gray-700",children:E?(0,a.jsx)(o.Z,{className:"h-5 w-5"}):(0,a.jsx)(c.Z,{className:"h-5 w-5"})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Private Key:"}),(0,a.jsxs)("div",{className:"flex items-center bg-white p-3 rounded-lg border",children:[(0,a.jsx)("p",{className:"text-sm flex-1 break-all ".concat(W?"":"blur-sm"),children:C.secretKey}),(0,a.jsx)("button",{onClick:()=>X(C.secretKey,"privateKey"),className:"ml-2 text-gray-500 hover:text-gray-700",children:O.privateKey?(0,a.jsx)(d.Z,{className:"h-5 w-5 text-green-500"}):(0,a.jsx)(i.Z,{className:"h-5 w-5"})}),(0,a.jsx)("button",{onClick:()=>G(!W),className:"ml-2 text-gray-500 hover:text-gray-700",children:W?(0,a.jsx)(o.Z,{className:"h-5 w-5"}):(0,a.jsx)(c.Z,{className:"h-5 w-5"})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Public Key:"}),(0,a.jsxs)("div",{className:"flex items-center bg-white p-3 rounded-lg border",children:[(0,a.jsx)("p",{className:"text-sm flex-1 break-all",children:C.publicKey}),(0,a.jsx)("button",{onClick:()=>X(C.publicKey,"publicKey"),className:"ml-2 text-gray-500 hover:text-gray-700",children:O.publicKey?(0,a.jsx)(d.Z,{className:"h-5 w-5 text-green-500"}):(0,a.jsx)(i.Z,{className:"h-5 w-5"})})]})]}),(0,a.jsx)("div",{className:"mt-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:(0,a.jsx)("p",{className:"text-red-600 text-sm font-medium",children:"⚠️ Warning: Store this information securely. Never share your private key or seed phrase with anyone!"})})]})]}),(0,a.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,a.jsx)("button",{onClick:z,className:"w-full bg-blue-500 text-white py-3 px-4 rounded-lg hover:bg-blue-600 transition-all duration-200 transform hover:-translate-y-0.5",children:"Go to Dashboard"}),(0,a.jsx)("button",{onClick:()=>{S(null),k(null),T(!1),G(!1),D({seedPhrase:!1,privateKey:!1,publicKey:!1,accountId:!1})},className:"w-full bg-gray-500 text-white py-3 px-4 rounded-lg hover:bg-gray-600 transition-all duration-200 transform hover:-translate-y-0.5",children:"Generate Another Wallet"})]})]}),(0,a.jsx)("div",{className:"mt-6 text-center",children:(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Already have a wallet?"," ",(0,a.jsx)("span",{onClick:()=>{let t="undefined"!=typeof chrome&&chrome.runtime&&chrome.runtime.id;t?j.f.replace("login"):e.push("/login")},style:{color:"#0070f3",cursor:"pointer"},children:"Login here"})]})})]})}),(0,a.jsx)(h.Z,{isOpen:q,onClose:L,onSubmit:Y,error:U})]})}}},function(e){e.O(0,[736,592,888,179],function(){return e(e.s=9804)}),_N_E=e.O()}]);