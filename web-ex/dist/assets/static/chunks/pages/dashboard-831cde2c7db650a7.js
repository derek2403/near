(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[26],{51075:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dashboard",function(){return s(52079)}])},52079:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return C}});var a=s(85893),n=s(67294),c=s(11163),i=s(90845),l=s(19314),r=s(90776),o=s(24945),d=s(86050),h=s(82187),x=s(68447),m=s(92063),u=s(61426),p=s(3306),j=s(36165),N=s(40364),g=s(51382),f=s(5362),v=s(91902);function w(e){let{balance:t,walletInfo:s,transactions:c,isLoadingTxns:r,copied:o,handleCopy:h,formatDate:x,getTransactionType:w,getTransactionAmount:b,router:y,pagination:_}=e,[S,k]=(0,n.useState)(!1),E=async()=>{try{await navigator.clipboard.writeText(null==s?void 0:s.accountId),k(!0),setTimeout(()=>{k(!1)},1e3)}catch(e){console.error("Failed to copy:",e)}},C=e=>!1===e.status?{status:"Failed",className:"text-red-500"}:{status:"",className:""},I=e=>Number(e).toFixed(6),A=e=>"https://testnet.nearblocks.io/address/".concat(e);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.w,{children:(0,a.jsx)(l.G,{className:"p-8",children:(0,a.jsxs)("div",{className:"text-black",children:[(0,a.jsx)("div",{className:"text-sm opacity-80 mb-1",children:"Total Balance"}),(0,a.jsxs)("div",{className:"text-4xl font-bold mb-4",children:[I(t)," NEAR"]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"text-sm opacity-80",children:"Account ID:"}),(0,a.jsx)("div",{className:"font-mono",children:null==s?void 0:s.accountId}),(0,a.jsx)(m.e,{content:S?"Copied!":"Copy to clipboard",children:(0,a.jsx)("button",{onClick:E,className:"text-black opacity-80 hover:opacity-100",children:S?(0,a.jsx)(j.Z,{className:"h-5 w-5"}):(0,a.jsx)(p.Z,{className:"h-5 w-5"})})}),(0,a.jsx)(m.e,{content:"View on Explorer",children:(0,a.jsx)("button",{onClick:()=>window.open(A(null==s?void 0:s.accountId),"_blank"),className:"text-black opacity-80 hover:opacity-100",children:(0,a.jsx)(v.Z,{className:"h-5 w-5"})})})]})]})})}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsx)(d.A,{size:"lg",color:"primary",startContent:(0,a.jsx)(N.Z,{className:"h-5 w-5"}),onPress:()=>y.push("/send?mode=native"),className:"h-20",children:(0,a.jsxs)("div",{className:"flex flex-col items-start w-full",children:[(0,a.jsx)("span",{className:"text-lg",children:"Send"}),(0,a.jsx)("span",{className:"text-xs opacity-80 whitespace-nowrap",children:"Transfer NEAR"})]})}),(0,a.jsx)(d.A,{size:"lg",color:"secondary",startContent:(0,a.jsx)(g.Z,{className:"h-5 w-5"}),onPress:()=>y.push("/receive"),className:"h-20",children:(0,a.jsxs)("div",{className:"flex flex-col items-start w-full",children:[(0,a.jsx)("span",{className:"text-lg",children:"Receive"}),(0,a.jsx)("span",{className:"text-xs opacity-80 whitespace-nowrap",children:"Get NEAR"})]})})]}),(0,a.jsx)(i.w,{children:(0,a.jsxs)(l.G,{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Recent Transactions"}),r?(0,a.jsx)("div",{className:"text-center py-4",children:"Loading transactions..."}):0===c.length?(0,a.jsx)("div",{className:"text-center py-4",children:"No transactions found"}):(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"space-y-3",children:c.map(e=>{let t=C(e),n="Failed"===t.status;return(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 rounded-full ".concat(n?"bg-red-100":"Sent"===w(e,s.accountId)?"bg-pink-100":"bg-green-100"),children:n?(0,a.jsx)(f.Z,{className:"h-5 w-5 text-red-500"}):"Sent"===w(e,s.accountId)?(0,a.jsx)(N.Z,{className:"h-5 w-5 text-pink-500"}):(0,a.jsx)(g.Z,{className:"h-5 w-5 text-green-500"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"font-medium flex items-center gap-2",children:[w(e,s.accountId),t.status&&(0,a.jsxs)("span",{className:"text-sm ".concat(t.className),children:["(",t.status,")"]})]}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:x(e.block_timestamp)})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[!n&&(0,a.jsxs)("div",{className:"font-medium ".concat(t.className),children:[I(b(e))," NEAR"]}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:(0,a.jsx)(d.A,{size:"sm",variant:"light",onPress:()=>window.open("https://testnet.nearblocks.io/txns/".concat(e.transaction_hash),"_blank"),children:"View"})})]})]},e.transaction_hash)})}),(0,a.jsx)("div",{className:"flex justify-center mt-4",children:(0,a.jsx)(u.g,{total:_.totalPages,page:_.currentPage,onChange:_.onPageChange,showControls:!0})})]})]})})]})}var b={src:"./_next/static/media/NearIcon.c8eff962.svg",height:90,width:90,blurWidth:0,blurHeight:0},y={src:"./_next/static/media/ChainIcon.060fadba.svg",height:800,width:800,blurWidth:0,blurHeight:0},_=s(98312);let{connect:S,keyStores:k,providers:E}=x;function C(){let e=(0,c.useRouter)(),[t,s]=(0,n.useState)(!0),[m,u]=(0,n.useState)(null),[p,j]=(0,n.useState)("0"),[N,g]=(0,n.useState)("0"),[f,v]=(0,n.useState)(!1),[S,k]=(0,n.useState)(null),[C,I]=(0,n.useState)([]),[A,R]=(0,n.useState)(!0),[P,T]=(0,n.useState)(!0),[Z,F]=(0,n.useState)(1),[W,L]=(0,n.useState)(1);(0,n.useEffect)(()=>{let e=localStorage.getItem("selectedTab");e&&T("near"===e)},[]),(0,n.useEffect)(()=>{let e=async()=>{try{s(!0);let e=await _.t.get("publicWalletInfo");if(!e){window.location.href=chrome.runtime.getURL("index.html");return}u(e);let t=new E.JsonRpcProvider({url:"https://rpc.testnet.near.org"}),a=await t.query({request_type:"view_account",finality:"final",account_id:e.accountId}),n=x.utils.format.formatNearAmount(a.amount);j(Number(n).toFixed(6)),g(a.amount),await G(e.accountId)}catch(e){console.error("Error in checkWallet:",e),k("Error loading wallet information")}finally{s(!1)}};e()},[]);let G=async e=>{try{R(!0);let t=await fetch("https://api-testnet.nearblocks.io/v1/account/".concat(e,"/txns-only?per_page=25&order=desc")),s=await t.json();if(s&&s.txns){let e=new Map;s.txns.forEach(t=>{if(!e.has(t.transaction_hash)){var s,a;e.set(t.transaction_hash,{transaction_hash:t.transaction_hash,signer_account_id:t.signer_account_id,receiver_account_id:t.receiver_account_id,block_timestamp:t.block_timestamp,deposit:(null===(s=t.actions_agg)||void 0===s?void 0:s.deposit)||"0",status:null===(a=t.outcomes)||void 0===a?void 0:a.status})}});let t=Array.from(e.values());I(t),L(Math.ceil(t.length/5))}}catch(e){console.error("Error fetching transactions:",e)}finally{R(!1)}},D=()=>{let e=(Z-1)*5,t=e+5;return C.slice(e,t)},z=e=>{let t=new Date(e/1e6);return t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})},M=(e,t)=>e.signer_account_id===t?"Sent":"Received",O=e=>{try{if(!e.deposit)return"0";let t=x.utils.format.formatNearAmount(e.deposit),s=e.signer_account_id===(null==m?void 0:m.accountId)?"-":"+";return"".concat(s).concat(Number(t).toFixed(2))}catch(e){return"0"}},U=async e=>{try{await navigator.clipboard.writeText(e),v(!0),setTimeout(()=>v(!1),2e3)}catch(e){console.error("Failed to copy:",e)}};return t?(0,a.jsx)("div",{className:"min-h-[600px] p-4 bg-gray-50 flex items-center justify-center",children:(0,a.jsx)(i.w,{children:(0,a.jsx)(l.G,{children:"Loading..."})})}):S||!m?(0,a.jsx)("div",{className:"min-h-[600px] p-4 bg-gray-50 flex items-center justify-center",children:(0,a.jsx)(i.w,{children:(0,a.jsx)(l.G,{children:S||"Wallet information not found"})})}):(0,a.jsx)("div",{className:"min-h-[600px] p-4 bg-gray-50",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center gap-6",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"Wallet Dashboard"}),(0,a.jsxs)(r.n,{"aria-label":"Wallet Mode",selectedKey:P?"near":"chain",onSelectionChange:e=>{let t="near"===e;T(t),localStorage.setItem("selectedTab",e)},variant:"bordered",classNames:{tabList:"gap-4",cursor:"w-full bg-primary",tab:"h-8 px-3",tabContent:"group-data-[selected=true]:text-white"},children:[(0,a.jsx)(o.r,{title:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(b,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"text-sm",children:"Native NEAR"})]})},"near"),(0,a.jsx)(o.r,{title:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(y,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"text-sm",children:"Chain Signature"})]})},"chain")]})]}),(0,a.jsx)(d.A,{isIconOnly:!0,variant:"light",onPress:()=>{window.location.href=chrome.runtime.getURL("settings.html")},children:(0,a.jsx)(h.Z,{className:"h-6 w-6"})})]}),(()=>{let t={balance:p,walletInfo:m,transactions:D(),isLoadingTxns:A,copied:f,handleCopy:U,formatDate:z,getTransactionType:M,getTransactionAmount:O,router:e,pagination:{currentPage:Z,totalPages:W,onPageChange:F}};return(0,a.jsx)(w,{...t})})()]})})}}},function(e){e.O(0,[736,592,888,179],function(){return e(e.s=51075)}),_N_E=e.O()}]);